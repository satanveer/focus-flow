@import "tailwindcss";
@import "./theme.css";

/* Theme design tokens */
:root {
	--bg: hsl(220 22% 99%);
	--bg-alt: hsl(220 40% 97%);
	--surface: hsl(220 40% 99%);
	--surface-elev: hsl(220 40% 99% / 0.6);
	--text: hsl(222 47% 11%);
	--text-muted: hsl(215 16% 46%);
	--border: hsl(215 30% 88%);
	--border-strong: hsl(215 25% 80%);
	--accent: hsl(221 83% 53%);
	--accent-accent2: hsl(262 83% 58%);
	--accent-accent3: hsl(291 84% 60%);
	--accent-accent4: hsl(171 77% 41%);
	--accent-foreground: #ffffff;
	--danger: hsl(0 84% 60%);
	--warning: hsl(37 92% 55%);
	--success: hsl(142 71% 45%);
	--info: hsl(199 89% 48%);
	--radius-sm: 4px;
	--radius-md: 8px;
	--radius-lg: 16px;
	--shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
	--shadow-md: 0 4px 14px -2px rgba(0,0,0,0.12);
	--glow: 0 0 0 1px hsl(221 83% 53% / .15),0 4px 18px -4px hsl(221 83% 53% / .35);
	--transition: .2s cubic-bezier(.4,0,.2,1);
}

html.dark {
	--bg: hsl(222 30% 7%);
	--bg-alt: hsl(222 32% 11%);
	--surface: hsl(222 33% 13%);
	--surface-elev: hsl(222 33% 16% / .8);
	--text: hsl(210 40% 96%);
	--text-muted: hsl(215 16% 65%);
	--border: hsl(215 25% 24%);
	--border-strong: hsl(215 25% 32%);
	--accent: hsl(221 83% 60%);
	--accent-accent2: hsl(262 83% 68%);
	--accent-accent3: hsl(291 84% 70%);
	--accent-accent4: hsl(171 77% 48%);
	--accent-foreground: #f8fafc;
	--danger: hsl(0 84% 60%);
	--warning: hsl(37 92% 55%);
	--success: hsl(142 71% 45%);
	--info: hsl(199 89% 58%);
	--shadow-sm: 0 1px 2px rgba(0,0,0,0.4);
	--shadow-md: 0 4px 20px -2px rgba(0,0,0,0.55);
	--glow: 0 0 0 1px hsl(221 83% 60% / .25), 0 8px 26px -6px hsl(221 83% 60% / .45);
}

body {
	background: var(--bg);
	color: var(--text);
	font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
	-webkit-font-smoothing: antialiased;
	transition: background var(--transition), color var(--transition);
	min-height: 100dvh;
}

/* Utility helpers */
.surface {
	background: var(--surface);
	box-shadow: var(--shadow-sm);
	border: 1px solid var(--border);
	border-radius: var(--radius-lg);
}

/* Navbar global reset (component now handles its own visuals) */
nav a, nav a:hover, nav a:visited, nav a:focus {
	text-decoration: none !important;
}

/* Single gradient focus outline (replaces previous multi-layer ring) */
:root { --focus-gradient: linear-gradient(90deg,var(--accent),var(--accent-accent2),var(--accent-accent3)); }

/* Target common interactive controls */
a:focus, button:focus, input:focus, textarea:focus, select:focus, [role="button"]:focus, [tabindex]:focus { outline: none; }

a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible, [role="button"]:focus-visible, [tabindex]:focus-visible {
	outline: none;
	position: relative;
}

/* Pseudo-element gradient ring (mask creates a hollow center so it looks like an outline) */
a:focus-visible::after,
button:focus-visible::after,
input:focus-visible::after,
textarea:focus-visible::after,
select:focus-visible::after,
[role="button"]:focus-visible::after,
[tabindex]:focus-visible::after {
	content: '';
	position: absolute;
	inset: -3px; /* ring thickness + gap */
	border-radius: inherit;
	padding: 2px; /* thickness of visible ring */
	background: var(--focus-gradient);
	/* Mask trick to show only the border portion */
	-webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
	mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
	-webkit-mask-composite: xor;
	mask-composite: exclude;
	pointer-events: none;
	filter: drop-shadow(0 1px 2px hsl(221 83% 10% / 0.25));
	transition: opacity 140ms ease-out, filter 180ms ease-out;
}

/* Dark mode slight boost */
html.dark a:focus-visible::after,
html.dark button:focus-visible::after,
html.dark input:focus-visible::after,
html.dark textarea:focus-visible::after,
html.dark select:focus-visible::after,
html.dark [role="button"]:focus-visible::after,
html.dark [tabindex]:focus-visible::after {
	filter: drop-shadow(0 0 0.5px hsl(221 83% 60% / 0.9)) drop-shadow(0 2px 6px hsl(221 83% 5% / 0.55));
}

/* High-contrast fallback */
@media (forced-colors: active) {
	a:focus-visible::after,
	button:focus-visible::after,
	input:focus-visible::after,
	textarea:focus-visible::after,
	select:focus-visible::after,
	[role="button"]:focus-visible::after,
	[tabindex]:focus-visible::after {
		content: none;
	}
	a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible, [role="button"]:focus-visible, [tabindex]:focus-visible {
		outline: 2px solid CanvasText !important;
		outline-offset: 2px;
	}
}

@media (prefers-reduced-motion: reduce) {
	a:focus-visible::after, button:focus-visible::after, input:focus-visible::after, textarea:focus-visible::after, select:focus-visible::after, [role="button"]:focus-visible::after, [tabindex]:focus-visible::after {
		transition: none;
	}
}

/* Scrollbar (webkit) */
*::-webkit-scrollbar { width: 10px; }
*::-webkit-scrollbar-track { background: var(--bg-alt); }
*::-webkit-scrollbar-thumb { background: var(--border); border-radius: 8px; }
*::-webkit-scrollbar-thumb:hover { background: var(--accent); }

/* Glowing placeholder for custom focus minutes input */
.focus-mins-input::placeholder {
	color: var(--accent-accent3);
	text-align: center;
	font-weight: 600;
	letter-spacing: .05em;
	text-transform: uppercase;
	filter: drop-shadow(0 0 4px var(--accent-accent3));
}

html.dark .focus-mins-input::placeholder {
	color: var(--accent-accent3);
	filter: drop-shadow(0 0 6px var(--accent-accent3));
}

.focus-mins-input:focus::placeholder { opacity: .35; filter: none; transition: opacity .25s ease; }